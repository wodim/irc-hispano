<?xml version="1.0"?>
<pxyservd>
  
  <server>
    <name>ceres.irc-hispano.org</name>
    <id>P1</id>
    <numeric>4032</numeric>
    <maxclients>1</maxclients>
    <info>IRC-Hispano Proxy Scanner</info>
    <sendq>1000000</sendq>
  </server>
  
  <!-- MODIFICAR ESTO -->
  <hub>
    <address>172.16.0.1</address>
    <port>4400</port>
    <bind-address></bind-address>
    <password>duck</password>
  </hub>
  
  <client>
    <nickname>pxyh-ceres</nickname>
    <nick-change-delay></nick-change-delay>
    <username>proxyscan</username>
    <hostname>bots.irc-hispano.org</hostname>
    <realname>IRC-Hispano Proxy Scanner</realname>
    <userip>0.0.0.0</userip>
    <usermode>+idkoBrh</usermode>
    <channel>#proxy_info</channel>
    <channel-mode>+tnis</channel-mode>
    <channel-timestamp>1004078035</channel-timestamp>
    <show-cached>1</show-cached>
  </client>
  
  <noscan>
    <server>sol.irc-hispano.org</server>
    <server>deep.space</server>
    <server>soyuz.irc-hispano.org</server>
    <server>vulcan.irc-hispano.org</server>
    <server>viento.irc-hispano.org</server>
    <server>viento2.irc-hispano.org</server>
    <userip>127.0.0.1</userip>
    <userip>255.255.255.255</userip>
    <userip>0/8</userip>
    <userip>10/8</userip>
    <userip>172.16/12</userip>
    <userip>192.168/16</userip>
    <!-- AGREGAR IPS de bots, admins,... -->
  </noscan>
  
  <!-- MODIFICAR ESTO -->
  <scanner>
    <address>172.16.0.5</address>
    <port>9601</port>
    <bind-address></bind-address>
  </scanner>
  
  <log>
    <file type="current">logs/proxy-current.log</file>
    <file type="daily">logs/proxy-yesterday.log</file>
    <file type="system">logs/system.log</file>
    <file type="glines">logs/glines.log</file>
    <file type="opercmds">logs/opercmds.log</file>
    <file type="proxytop">logs/proxytop.db</file>
    <history-dirpath>logs/history</history-dirpath>
    <timezone>GMT</timezone>
  </log>
  
  <gline>
    <delay>900</delay>
    <!-- type constants taken from the OPAS library -->
    <reason type="1">Misconfigured Wingate. Please visit http://www.undernet.org/proxyscan.php </reason><!-- space at the end for mIRC users -->
    <reason type="2">Misconfigured Socks Server. Please visit http://www.undernet.org/proxyscan.php </reason>
    <reason type="3">Misconfigured Socks Server. Please visit http://www.undernet.org/proxyscan.php </reason>
    <reason type="4">Misconfigured Proxy Server. Please visit http://www.undernet.org/proxyscan.php </reason>
    <reason type="0">Misconfigured Proxy Server. Please visit http://www.undernet.org/proxyscan.php </reason>
  </gline>
  
  <notice>
    <line>Esta red tiene en funcionamiento un detector que comprueba</line>
    <line>proxies abiertos, socks/wingates abiertos y troyanos abiertos.</line>
    <line>Si te aparece una conexion desde scan.irc-hispano.org/194.149.73.250</line>
    <line>por favor no la tenga en cuenta, ya que es el detector en accion y NO es un intento hostil.</line>
  </notice>
  
  <help-menu>
IRC-Hispano Proxy Scanner Service Help Menu
===========================================
  Comandos (Solo OPERadores de la red)
  ------------------------------------
    INV             - Te invita al canal de consola
    SERVERS [...]   - Muestra estadisticas de servidores
    STATUS [...]    - Estadísticas del servidor y del demonio de Escaneo
    NOSCAN          - Visualiza la configuracion de NOSCAN
    PROXYTOP        - Proxies encontrados por servidor
    STATS           - Estadísticas Técnicas
    PXSTATS         - Estadísticas del demonio de Escaneo
    GREM &lt;GLINE&gt;    - Elimina una Gline puesta por mi
    INFO <nick>     - Muestra informacion del usuario
    INFO <canal>    - Muestra informacion de todos los usuarios del canal
    RECHECK <nick>  - Reescanea a un usuario
    RECHECK <canal> - Reescanea a todos los usuarios de un canal
    HELP CREDITS    - Creditos del bot
    HELP &lt;COMMAND&gt;  - Más ayuda para el comando &lt;COMMAND&gt;
  </help-menu>
  
  <help topic="inv">
INV
===
  Este comando invita a cualquier Operador global a mi canal de consola.
  </help>
  
  <help topic="servers">
SERVERS [-info] [-noscan]
==============================================
Muestra un Árbol de Red de IRC con info opcional:
  -info : Muestra número de usuarios
  -scan : Muestra en negrita los servidores escaneados
  </help>
  
  <help topic="status">
STATUS [-serv|-scan]                     (1/3)
==============================================
Seguramente es el comando más interesante de pxydserv. Utilízalo
cuantas veces quieras para ver rápidamente cómo está funcionando pxys.
 
Estado de servidores de IRC
---------------------------
Una primera parte visualiza el estado del servidor: número de
servidores en la Red, número de clientes y canales, lo típico.
pxyservd obtiene las IPs de los clientes de la Red, y las manda
a pxyscand, el proceso asociado del demonio de escaneo, para
buscar proxys. "Scan ClientQ" es el número de clientes que no
han sido comprobados todavía; pxyservd está esperando una
respuesta positiva o negativa del demonio de escaneo. Hay que
controlar este valor  ya que no debería crecer mucho en
condiciones normales y si lo hace, debería reducirse rápidamente.
Es normal tener siempre algunos clientes en la cola de escaneo...
el demonio de scaneo no siempre puede responder rápidamente.
"Unscannable clients" muestra el número actual de clientes 
*conectados* cuyo escaneo fue fallido. Un escaneo fallido ocurre
cuando el host o la red de ese cliente es inalcanzable desde el
demonio de escaneo de proxys. Le sigue el tiempo en activo del 
servidor (tiempo en activo de pxyservd).
 
Por favor consulte HELP STATUS 2 para una descripción detallada
de la parte del estado del escaner.
  </help>

  <help topic="status 2">
STATUS [-serv|-scan]                     (2/3)
==============================================
Estado del escaner
------------------
Primero, debes saber que el demonio de escaneo (pxyscand) ahora 
está separado del servidor de servicios de IRC(u) (pxyservd).
Sin embargo, se pueden comunicar: primero para solicitar escaneo
de proxys, pero también para obtener estados/estadísticas. Así
que se puede notar un retardo antes de recibir la respuesta
de estado del scanner si el demonio de escaneo no está ejecutándose
localmente, por ejemplo.
Las primeras líneas muestran info del estado de la conexión entre
el servidor y el demonio de escaneo. Si no están conectados
(ej. el demonio de escaneo está caído), verás un aviso ahí.
"Scanning activity" es un buen indicador de la carga del demonio
de escaneo. 100%% significa que todos los sockets están ocupados
y está haciendo lo posible para escanearlos. Valores menores
significan que el scanner podría manejar más clientes en ese
momento. Ese porcentaje va seguido por valores más precisos: el
número de IPs únicas que están siendo escaneadas en el momento, y
el número de escaneos que están siendo ejecutados en ese momento.
Normalmente, tienes varios escaneos por una IP. El número de
escaneos es de hecho el número de sockets necesarios para
ejecutar los escaneos de esas IPs (aunque no es exactamente el
número de sockets abiertos, y lo que es más, algunos de ellos
podrían no estar aún creados o estar ya cerrados).
"IP scans completed" es simplemente un contador de IPs reales
escaneadas en la sesión actual (total de todas las sesiones entre
paréntesis). Para consultar el scanner's cache hits contador, usa
el comando PXSTATS.
También se muestra una media de escaneos ejecutados.
 
Por favor use HELP STATUS 3 para ver la siguiente página.
  </help>
  
  <help topic="status 3">
STATUS [-serv|-scan]                     (3/3)
==============================================
Cuando "ScanQ size" no es cero, la actividad actual de escaneo
debería estar en 100%% (el máximo) y sabiendo que el scanner no
puede procesar todas las IPs al mismo tiempo: el proceso añade
las peticiones de escaneo de IP a una cola para procesarlas más
tarde. Ese número debería bajar hasta 0, si no, es que tienes un
pequeño problema.
"Target" es la IP actual necesaria para algúnos escaneos (como
para descubrir Socks 4). Se debe configurar con la IP de uno de
los servidores estables de tu red.
"Scan connect() timeout" indica el número de segundos a
esperar antes de que un escaneo desista.
 
A continuación del número total de proxy encontrados, verás el
tiempo de conexión del demonio de escaneo. La última parte del
comando STATUS muestra una tabla detallada con contadores de
proxys encontrados desde que el demonio de escaneo se arrancó.
Como dato, se muestran contadores "open" adicionales de
conexiones establecidas.
 
Opciones:
        -serv : sólo visualiza el estado de servidores IRC
        -scan : sólo visualiza el estado del demonio de escaneo
				de proxys
  </help>

  <help topic="noscan">
NOSCAN
==============================================
Muestra  las reglas "noscan" de pxyservd. pxyservd, el
servicio servidor de IRC(u) parte de pxys v2, se configura con
una lista de bloques de IPs que se ignoran. Los clientes
conectados desde estas ips se catalogan como "scanning disabled".
Además se puede añadri una lista de servidores remotos: los
clientes que usen estos servidores también se ignoran, de manera
que es útil para services, hubs, o servidores reservados a IRCops.
  </help>

  <help topic="proxytop">
PROXYTOP
==============================================
Este comando muestra los servidores donde más proxys se
encontraron (y que fueron glineados). Puede ayudar a encontrar
servidores 'muy abiertos' con líneas I/K posiblemente mal puestas,
o servidores preferidos de los bots de flood... Dale el justo
valor al indicador de MAXUSERS, ya que los servidores grandes
tienen más posibilidades de albergar clientes con proxy.
  </help>
  
  <help topic="stats">
STATS
==============================================
Muestra estadísticas soble sockets, estructuras internas y 
consumo de memoria.
  </help>

  <help topic="pxstats">
PXSTATS
==============================================
Obtiene estadísticas internas del demonio de escaneo de proxys.
Sólo disponibles cuando pxyscand está conectado. Entre otros
valores extraños, muestra la cuenta de IPs en caché de usuarios
ya escaneados. Esta caché permite al escaner trabajar en
condiciones extremas, evitando volver a escanear IPs comprobadas
recientemente.
  </help>

  <help topic="grem">
GREM &lt;IP|GLINE&gt;
==============================================
Método de eliminar las G-Lines de proxyscan. Hay que dar la IP
o la máscara user@host baneados, por ej.: *@&lt;IP&gt;.
Después de borrar la g-line, la IP no es ignorada, y se escaneará
de nuevo si se vuelve a ver.
  </help>

  <help topic="info">
INFO &lt;NICK|CANAL&gt;
==============================================
Comando que da inforamción sobre clientes o canales. Proporciona
algo de información sobre los clientes o canales relacionada con
el escaneo de proxys.
 
Ejemplos:
        INFO bot-42
        INFO #floodland
  </help>
  
  <help topic="recheck">
RECHECK &lt;NICK|CANAL&gt;
==============================================
Al igual que GREM, este comando ejecuta una acción y su propósito
no es sólo informativo. Úsalo con cuidado.
El comando RECHECK permite a un operador global del IRC solicitar
la recomprobación de un usuario concreto o de todos los usuarios
de un canal especificado.

No obstante, tenga en cuenta que los usuarios afectados por
reglas NOSCAN nunca se comprueban. Además, si el usuario no ha
sido escaneado antes (por ej.: si acaba de conectar), el comando
no hace nada. No dude en usar previamente el comando INFO sobre
el canal o el usuario si es necesario.
 
Recuerda que se envía un aviso a mi canal de log si se hace
RECHECK de un canal entero.
 
Ejemplos:
        RECHECK bot-42
        RECHECK #floodland
  </help>
  
  <help topic="evreg">
EVREG &lt;MODOS&gt;
=============
  Este comando permite a operadores globales de IRC recibir
  notificaciones de sucesos concretos. Existen varios modos, 
  con un carácter diferente para cada uno. Los operadores con
  el modo X activado recibirán notificaciones del cliente virtual
  del escaner de proxys (yo) cuando el evento X se produzca.
  
  MODOS
  -----
    'p' : encontrado un nuevo proxy inseguro, lo muestra
    'c' : muestra las coincidencias con proxys en caché
    'o' : muestra IRCops que usan /oper
    'x' : eventos relacionados con conexiones de pxyscand

  Por ejemplo, un operador que quiere ser avisado cuando se detecte
  un nuevo proxy y cuando se use /oper tendría que escribir:
  /msg &lt;me&gt; evreg +po  

  Para desactivar sólo las notificaciones de uso de /oper:
  /msg &lt;me&gt; evreg -o
  
  NOTA: Estos modos permanecen hasta que desconectas o se produce
        un split entre tú y el escaner de proxys.
  </help>
  
  <help topic="credits">
pxyservd v2 - parte del software pxys v2
========================================
Visita: http://pxys.sf.net

Adaptado para IRC-Hispano por
  Toni Garcia   zoltan    &lt;zoltan@irc-dev.net&gt;

Traducido al castellano por
  Toni Garcia   zoltan    &lt;zoltan@irc-dev.net&gt;
  E.G.A         Ruharen   &lt;ruharen@gmail.net&gt;
  </help>
  
</pxyservd>
